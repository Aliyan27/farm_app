
generator client {
  provider = "prisma-client-js"
  output   =  "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}
model user{
    id Int @id @default(autoincrement())
    name String
    email String @unique
    password String
    role String @default("user")
    isEmailVerified Boolean @default(false)
    createdAt DateTime @default(now())
}

enum FarmUnit {
  KAASI_19
  MATITAL
  COMBINED
  OTHER
}

enum ExpenseHead {
  CHICKEN
  FEED
  RENT
  UTILITIES
  PACKING_MATERIAL
  TP
  SALARIES_PAYMENTS
  MESS
  POWER_ELECTRIC
  POL
  MEDICINE
  VACCINE
  REPAIR_MAINTENANCE
  TRAVELLING_LOGISTICS
  OFFICE_EXPENSES
  MEETING_REFRESHMENT
  FURNITURE_FIXTURE
  COMPUTER_DEVICES
  PROFESSIONAL_FEE
  MISCELLANEOUS
  SHAREHOLDERS_DIVIDEND
  OTHER
}

model Expense {
  id            Int           @id @default(autoincrement())
  expenseDate   DateTime      @map("expense_date")
  month         String?       // "Dec", "Jan" – keep manual for now
  challan       String?
  transId       String?       @map("trans_id")
  farm          FarmUnit
  expenseCost   Float         @map("expense_cost")
  head          ExpenseHead
  notes         String?
  createdBy     Int?          // reference to User (audit)
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt

  @@map("expenses")
}

model EggProduction {
  id           Int       @id @default(autoincrement())
  date         DateTime
  month        String?   // "Dec"
  farm         FarmUnit
  chickenEggs  Int
  totalEggs    Int?
  notes        String?   // for any remarks
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

model EggSale {
  id              Int       @id @default(autoincrement())
  saleDate        DateTime
  month           String?   // e.g. "Dec"
  challanNumber   String?   // "1031"
  farm            FarmUnit  // KAASI_19, MATITAL, etc.
  amountReceived  Float     // 16900
  description     String    // "2p6c @ 5500"
  type            String?   // usually "Eggs"
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model FeedPurchase {
  id               Int       @id @default(autoincrement())
  date             DateTime
  month            String?   // "Dec", "Jan", etc.
  voucherType      String    // "IN" or "OUT"
  feedType         String    // e.g. "13-C1", "13-C3"
  farm             FarmUnit
  bags             Int
  description      String?
  debit            Float?    // withdrawal / purchase cost (OUT)
  credit           Float?    // funds added / payment received (IN)
  runningBalance   Float?    // calculated or stored
  reconciled       Boolean   @default(false)  // D.O. reconciled
  postedToStatement Boolean  @default(false)  // posted to income statement
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
}

model Salary {
  id             Int       @id @default(autoincrement())
  month          String    // "December", "January", etc.
  employeeName   String
  designation    String
  farm           FarmUnit? // optional — some are "Management" (central)
  attendance     Int?      // days present
  basicSalary    Float?    // base pay
  salaryAmount   Float     // gross salary
  advance        Float?    // deducted advance
  penaltyReward  Float?    // penalty or bonus
  total          Float     // final amount paid
  remarks        String?   // e.g. "Rs. 22k pending", "60k/100k recovered"
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
}